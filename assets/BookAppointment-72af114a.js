import{r,u as I,e as C,m as A,o as Y,j as s,s as d,h as a,n as i}from"./index-645bad21.js";import{L as T}from"./Layout-417e7ad3.js";import{h as x,B as f}from"./index-a8263752.js";import{A as l}from"./AxiosINSTENCE-8a24f150.js";import{R as E,C as g,D as M,T as P}from"./index-b51f1ad4.js";import{u as S}from"./useDispatch-529d3876.js";import"./Button-e7fc3819.js";import"./useCookies-01585a5f.js";import"./index-22be9ce3.js";function z(){const[m,c]=r.useState(!1),b=I(),[p,j]=r.useState(),[u,k]=r.useState(),{user:h}=C(e=>e.user),[t,y]=r.useState(null),n=A(),o=S(),{addToast:N}=Y.useToasts(),w=async()=>{try{o(d());const e=await l.post("/api/doctor/get-doctor-info-by-id",{doctorId:n.doctorId,token:document.cookie});o(a()),e.data.success&&y(e.data.data)}catch(e){console.log(e),o(a())}},v=async()=>{try{o(d());const e=await l.post("/api/user/check-booking-avilability",{token:document.cookie,doctorId:n.doctorId,date:p,time:u});o(a()),e.data.success?(i.success(e.data.message),c(!0)):i.error(e.data.message)}catch{i.error("Error booking appointment"),o(a())}},D=async()=>{c(!1);try{o(d());const e=await l.post("/api/user/book-appointment",{doctorId:n.doctorId,userId:h._id,doctorInfo:t,userInfo:h,date:p,time:u});o(a()),e.data.success&&(N("May you get well",{appearance:"success"}),i.success(e.data.message),b("/appointments"))}catch{i.error("Error booking appointment"),o(a())}};return r.useEffect(()=>{w()},[]),s.jsx(T,{children:t&&s.jsxs("div",{children:[s.jsxs("h1",{className:"page-title",children:[t.firstName," ",t.lastName]}),s.jsx("hr",{}),s.jsxs(E,{gutter:20,className:"mt-5",align:"middle",children:[s.jsx(g,{span:8,sm:24,xs:24,lg:8,children:s.jsx("img",{src:"../../public/photo_6073515195055060811_y-removebg-preview.png",alt:"",width:"100%",height:"400"})}),s.jsxs(g,{span:8,sm:24,xs:24,lg:8,children:[s.jsxs("h1",{className:"normal-text",children:[s.jsx("b",{children:"Timings :"})," ",t.timings[0]," - ",t.timings[1]]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone Number : "}),t.phoneNumber]}),s.jsxs("p",{children:[s.jsx("b",{children:"Address : "}),t.address]}),s.jsxs("p",{children:[s.jsx("b",{children:"Fee per Visit : "}),t.feePerCunsultation]}),s.jsxs("p",{children:[s.jsx("b",{children:"Website : "}),t.website]}),s.jsxs("div",{className:"d-flex flex-column pt-2 mt-2",children:[s.jsx(M,{format:"DD-MM-YYYY",onChange:e=>{j(x(e).format("DD-MM-YYYY")),c(!1)}}),s.jsx(P,{format:"HH:mm",className:"mt-3",onChange:e=>{c(!1),k(x(e).format("HH:mm"))}}),!m&&s.jsx(f,{className:"primary-button mt-3 full-width-button",onClick:v,children:"Check Availability"}),m&&s.jsx(f,{className:"primary-button mt-3 full-width-button",onClick:D,children:"Book Now"})]})]})]})]})})}export{z as default};
