import{r as c,j as e,s as d,h as o,n as p}from"./index-feacd9d3.js";import{L as f}from"./Layout-0796e2cb.js";import{h as m}from"./index-6a52d573.js";import{A as h}from"./AxiosINSTENCE-7db392fe.js";import{T as j}from"./Table-be284c94.js";import{u as g}from"./useDispatch-f07cb0b0.js";import"./colors-9b52e8fd.js";import"./useCookies-4a6cfc8c.js";import"./index-0277b7d1.js";import"./motion-9b0fc20d.js";import"./useFlexGapSupport-a3c906df.js";import"./KeyCode-ed39cc0a.js";import"./Dropdown-da959604.js";import"./index-514e3712.js";function T(){const[x,l]=c.useState([]),s=g(),r=async()=>{try{s(d());const a=await h.get("/api/doctor/get-appointments-by-doctor-id",{token:document.cookie});s(o()),a.data.success&&l(a.data.data)}catch{s(o())}},i=async(a,t)=>{try{s(d());const n=await h.post("/api/doctor/change-appointment-status",{appointmentId:a._id,status:t,token:document.cookie});s(o()),n.data.success&&(p.success(n.data.message),r())}catch{p.error("Error changing doctor account status"),s(o())}},u=[{title:"Id",dataIndex:"_id"},{title:"Patient",dataIndex:"name",render:(a,t)=>e.jsx("span",{children:t.userInfo.name})},{title:"Phone",dataIndex:"phoneNumber",render:(a,t)=>e.jsx("span",{children:t.doctorInfo.phoneNumber})},{title:"Date & Time",dataIndex:"createdAt",render:(a,t)=>e.jsxs("span",{children:[m(t.date).format("DD-MM-YYYY")," ",m(t.time).format("HH:mm")]})},{title:"Status",dataIndex:"status"},{title:"Actions",dataIndex:"actions",render:(a,t)=>e.jsx("div",{className:"d-flex",children:t.status==="pending"&&e.jsxs("div",{className:"d-flex",children:[e.jsx("h1",{className:"anchor px-2",onClick:()=>i(t,"approved"),children:"Approve"}),e.jsx("h1",{className:"anchor",onClick:()=>i(t,"rejected"),children:"Reject"})]})})}];return c.useEffect(()=>{r()},[]),e.jsxs(f,{children:[e.jsx("h1",{className:"page-header",children:"Appointments"}),e.jsx("hr",{}),e.jsx(j,{columns:u,dataSource:x})]})}export{T as default};
