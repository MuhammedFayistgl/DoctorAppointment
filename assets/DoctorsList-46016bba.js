import{r as c,j as s,s as m,h as o,n as p}from"./index-c35d94b9.js";import{L as x}from"./Layout-1ad5e6a5.js";import{h as f}from"./index-4ce07727.js";import{A as d}from"./AxiosINSTENCE-71de8c8b.js";import{C as j}from"./CustomTag-a8a76258.js";import{P as g}from"./index.esm-d07b94be.js";import{F as A}from"./index.esm-c707f764.js";import{G as N}from"./index.esm-1f1a6e95.js";import{T as y}from"./Table-6b745d6d.js";import{u as D}from"./useDispatch-5949b431.js";import"./colors-82a61e49.js";import"./useCookies-7b991fe5.js";import"./iconBase-97b7da77.js";import"./index-ebc4a300.js";import"./motion-8a43c01c.js";import"./useFlexGapSupport-738625d0.js";import"./KeyCode-bfbad64a.js";import"./Dropdown-e8d17faf.js";import"./index-52933fbb.js";function _(){const[l,h]=c.useState([]),e=D(),i=async()=>{try{e(m());const a=await d.get("/api/admin/get-all-doctors");e(o()),a.data.success&&h(a.data.data)}catch{e(o())}},r=async(a,t)=>{try{e(m());const n=await d.post("/api/admin/change-doctor-account-status",{doctorId:a._id,userId:a.userId,status:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e(o()),n.data.success&&(p.success(n.data.message),i())}catch{p.error("Error changing doctor account status"),e(o())}};c.useEffect(()=>{i()},[]);const u=[{title:"Name",dataIndex:"name",render:(a,t)=>s.jsxs("span",{children:[t.firstName," ",t.lastName]})},{title:"Phone",dataIndex:"phoneNumber",render:(a,t)=>s.jsxs("span",{style:{color:"#0087BA"},children:[s.jsx(g,{style:{fontSize:20}})," ",t==null?void 0:t.phoneNumber]})},{title:"Created At",dataIndex:"createdAt",render:a=>s.jsxs("span",{children:[s.jsx(A,{style:{fontSize:20,marginRight:8}}),f(a.createdAt).format("DD-MM-YYYY")]})},{title:"status",dataIndex:"status",render:(a,t)=>s.jsx("span",{children:s.jsx(j,{status:t==null?void 0:t.status})})},{title:"Actions",dataIndex:"actions",render:(a,t)=>s.jsxs("div",{className:"d-flex",children:[t.status==="pending"&&s.jsx("h1",{className:"anchor",onClick:()=>r(t,"approved"),children:"Approve"}),t.status==="approved"&&s.jsx("h1",{className:"anchor",onClick:()=>r(t,"blocked"),children:"Block"}),t.status==="blocked"&&s.jsx("h1",{className:"anchor",onClick:()=>r(t,"approved"),children:"Approve"})]})}];return s.jsxs(x,{children:[s.jsxs("h1",{style:{color:"#0087ba"},className:"page-header",children:[s.jsx(N,{})," Doctors List"]}),s.jsx("hr",{}),s.jsx(y,{columns:u,dataSource:l})]})}export{_ as default};
