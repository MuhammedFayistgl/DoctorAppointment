import{r,u as v,b as I,g as C,j as s,s as m,h as a,n as i}from"./index-3d988f94.js";import{L as A}from"./Layout-0104e1b5.js";import{h as f}from"./index-087ea287.js";import{A as d}from"./AxiosINSTENCE-ff762faa.js";import{R as Y,C as x}from"./row-75f20893.js";import{D as E,T as P}from"./index-23034781.js";import{B as b}from"./useFlexGapSupport-66eb6649.js";import{u as S}from"./useDispatch-8c09a591.js";import"./colors-ce597849.js";import"./useCookies-0b032419.js";import"./index-30b6d9f5.js";import"./KeyCode-4a32dc8e.js";function G(){const[l,n]=r.useState(!1),g=v(),[p,j]=r.useState(),[u,k]=r.useState(),{user:h}=I(t=>t.user),[e,N]=r.useState(null),c=C(),o=S(),y=async()=>{try{o(m());const t=await d.post("/api/doctor/get-doctor-info-by-id",{doctorId:c.doctorId,token:document.cookie});o(a()),t.data.success&&N(t.data.data)}catch(t){console.log(t),o(a())}},w=async()=>{try{o(m());const t=await d.post("/api/user/check-booking-avilability",{token:document.cookie,doctorId:c.doctorId,date:p,time:u});o(a()),t.data.success?(i.success(t.data.message),n(!0)):i.error(t.data.message)}catch{i.error("Error booking appointment"),o(a())}},D=async()=>{n(!1);try{o(m());const t=await d.post("/api/user/book-appointment",{token:document.cookie,doctorId:c.doctorId,userId:h._id,doctorInfo:e,userInfo:h,date:p,time:u});o(a()),t.data.success&&(i.success(t.data.message),g("/appointments"))}catch{i.error("Error booking appointment"),o(a())}};return r.useEffect(()=>{y()},[]),s.jsx(A,{children:e&&s.jsxs("div",{children:[s.jsxs("h1",{className:"page-title",children:[e.firstName," ",e.lastName]}),s.jsx("hr",{}),s.jsxs(Y,{gutter:20,className:"mt-5",align:"middle",children:[s.jsx(x,{span:8,sm:24,xs:24,lg:8,children:s.jsx("img",{src:"https://thumbs.dreamstime.com/b/finger-press-book-now-button-booking-reservation-icon-online-149789867.jpg",alt:"",width:"100%",height:"400"})}),s.jsxs(x,{span:8,sm:24,xs:24,lg:8,children:[s.jsxs("h1",{className:"normal-text",children:[s.jsx("b",{children:"Timings :"})," ",e.timings[0]," - ",e.timings[1]]}),s.jsxs("p",{children:[s.jsx("b",{children:"Phone Number : "}),e.phoneNumber]}),s.jsxs("p",{children:[s.jsx("b",{children:"Address : "}),e.address]}),s.jsxs("p",{children:[s.jsx("b",{children:"Fee per Visit : "}),e.feePerCunsultation]}),s.jsxs("p",{children:[s.jsx("b",{children:"Website : "}),e.website]}),s.jsxs("div",{className:"d-flex flex-column pt-2 mt-2",children:[s.jsx(E,{format:"DD-MM-YYYY",onChange:t=>{j(f(t).format("DD-MM-YYYY")),n(!1)}}),s.jsx(P,{format:"HH:mm",className:"mt-3",onChange:t=>{n(!1),k(f(t).format("HH:mm"))}}),!l&&s.jsx(b,{className:"primary-button mt-3 full-width-button",onClick:w,children:"Check Availability"}),l&&s.jsx(b,{className:"primary-button mt-3 full-width-button",onClick:D,children:"Book Now"})]})]})]})]})})}export{G as default};
